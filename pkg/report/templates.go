package report

// HTMLTemplate å®šä¹‰äº†è¯Šæ–­æŠ¥å‘Šçš„ç½‘é¡µç»“æ„
// ä½¿ç”¨äº† Bootstrap 5 è¿›è¡Œç¾åŒ–
const HTMLTemplate = `
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KubeHealer è¯Šæ–­æŠ¥å‘Š - {{ .PodName }}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f8f9fa; padding-top: 20px; }
        .card { margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .status-running { color: #198754; font-weight: bold; }
        .status-waiting { color: #ffc107; font-weight: bold; }
        .status-terminated { color: #dc3545; font-weight: bold; }
        .issue-error { border-left: 5px solid #dc3545; background-color: #fff5f5; }
        .issue-warning { border-left: 5px solid #ffc107; background-color: #fff3cd; }
        .event-icon { width: 20px; display: inline-block; text-align: center; }
    </style>
</head>
<body>
    <div class="container">
        <div class="text-center mb-4">
            <h1>ğŸš‘ KubeHealer è¯Šæ–­æŠ¥å‘Š</h1>
            <p class="text-muted">ç”Ÿæˆæ—¶é—´: {{ .GenerateTime }}</p>
        </div>

        <div class="card">
            <div class="card-header bg-primary text-white">åŸºç¡€ä¿¡æ¯</div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-3"><strong>Pod åç§°:</strong> {{ .PodName }}</div>
                    <div class="col-md-3"><strong>å‘½åç©ºé—´:</strong> {{ .Namespace }}</div>
                    <div class="col-md-3"><strong>æ‰€åœ¨èŠ‚ç‚¹:</strong> {{ .NodeName }}</div>
                    <div class="col-md-3"><strong>é‡å¯æ¬¡æ•°:</strong> <span class="badge bg-secondary">{{ .RestartCount }}</span></div>
                </div>
                <div class="mt-2">
                    <strong>å½“å‰çŠ¶æ€:</strong> <span class="badge bg-info text-dark">{{ .Phase }}</span>
                </div>
            </div>
        </div>

        <h3>å®¹å™¨æ·±åº¦åˆ†æ</h3>
        {{ range .Containers }}
        <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
                <span>ğŸ“¦ å®¹å™¨: <strong>{{ .Name }}</strong></span>
                <span class="badge {{ if eq .State "Running" }}bg-success{{ else }}bg-warning{{ end }}">{{ .State }}</span>
            </div>
            <div class="card-body">
                <p><strong>èµ„æºé…ç½®:</strong> <code>{{ .ResourceInfo }}</code></p>
                
                {{ if .Reason }}
                <p><strong>åŸå› :</strong> {{ .Reason }}</p>
                {{ end }}

                {{ if .Message }}
                <div class="alert alert-secondary" role="alert">
                    <strong>è¯¦ç»†ä¿¡æ¯:</strong> {{ .Message }}
                </div>
                {{ end }}

                {{ range .Issues }}
                <div class="alert {{ if eq .Type "Error" }}issue-error{{ else }}issue-warning{{ end }}">
                    <h5 class="alert-heading">
                        {{ if eq .Type "Error" }}ğŸ›‘{{ else }}âš ï¸{{ end }} {{ .Title }}
                    </h5>
                    {{ if .RawError }}
                    <p class="mb-1 text-muted"><small>åŸå§‹æŠ¥é”™: {{ .RawError }}</small></p>
                    {{ end }}
                    {{ if .Suggestion }}
                    <hr>
                    <p class="mb-0"><strong>ğŸ’¡ ä¿®å¤å»ºè®®:</strong> {{ .Suggestion }}</p>
                    {{ end }}
                </div>
                {{ end }}
            </div>
        </div>
        {{ end }}

        <h3>æœ€è¿‘äº‹ä»¶ (Events)</h3>
        <div class="card">
            <div class="card-body">
                {{ if not .Events }}
                    <p class="text-muted">æš‚æ— äº‹ä»¶è®°å½•</p>
                {{ else }}
                    <ul class="list-group list-group-flush">
                    {{ range .Events }}
                        <li class="list-group-item">{{ . }}</li>
                    {{ end }}
                    </ul>
                {{ end }}
            </div>
        </div>
        
        <footer class="text-center mt-4 mb-4 text-muted">
            <small>Generated by KubeHealer</small>
        </footer>
    </div>
</body>
</html>
`
